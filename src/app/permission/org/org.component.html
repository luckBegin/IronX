<nz-tabset>
	<nz-tab nzTitle="员工列表">
		<div class="c-content-wrap">
			<div class="tabSwitch">
				<div class="searchGroup">
					<div class="c-flex-row-start c-flex-auto-wrap c-search-row">
						<div class="c-search-item">
							<nz-select style="width: 120px;" [(ngModel)]="stuffSearch.status" nzAllowClear nzPlaceHolder="状态">
								<nz-option nzValue="1" nzLabel="正常"></nz-option>
								<nz-option nzValue="2" nzLabel="冻结"></nz-option>
								<nz-option nzValue="3" nzLabel="失效"></nz-option>
								<nz-option nzValue="4" nzLabel="过期"></nz-option>
							</nz-select>
						</div>
						<div class="c-search-item">
							<input style="width: 120px;" nz-input placeholder="用户名" [(ngModel)] = 'stuffSearch.userName'>
						</div>
						<div class="c-search-item">
							<input style="width: 120px;" nz-input placeholder="真实姓名" [(ngModel)] = 'stuffSearch.name'>
						</div>
						<div class="c-search-item">
							<input style="width: 120px;" nz-input placeholder="手机号" [(ngModel)] = 'stuffSearch.phone'>
						</div>
					</div>
					<div class="c-flex-row-start c-flex-auto-wrap">
						<div class="c-search-btn">
							 <button nz-button nzType="primary" (click)='reset("stuff")'>重置</button>
						</div>
						<div>
							 <button (click) = 'search("stuff")' nz-button nzType="primary"><i class="anticon anticon-search"></i>搜索</button>
						</div>
					</div>
				</div>
			</div>
			<button nz-button nzType="primary" style="border-radius: 0px" (click)='addNewStuff()'>
				<i class="anticon anticon-plus"></i>
				新增角色
			</button>
			<c-table [tableData]='tableData'>
			</c-table>
			<div class="c-pag">
				<nz-pagination (nzPageIndexChange)='pageChange($event , "page")' (nzPageSizeChange) = 'pageChange($event , "size")' [nzPageIndex]="stuffSearch.currentPage"  [nzTotal]="totalSize" nzShowSizeChanger nzShowQuickJumper></nz-pagination>
			</div>
		</div>
	</nz-tab>
	<nz-tab nzTitle="网点结构">
		<div *ngIf='treeInfo' style="padding: 20px 40px 170px 20px;">
			<nz-tree 
				[(ngModel)]="treeInfo"  
				[nzShowLine] = 'true' 
				(nzContextMenu) = 'hideMenu()' 
				(nzClick)='showMenu($event) ' 
				(nzExpandChange)='hideMenu()'
				[nzDefaultExpandAll] = 'true' 
			>
			</nz-tree>
		</div>
	</nz-tab>
	<nz-tab nzTitle="角色管理">
		<c-table [tableData]='tableData_role'>
		</c-table>
	</nz-tab>
</nz-tabset>
<div class="menu" #menu>
	<ul>
		<li (click)='addItem()'>添加</li>
		<li (click)='editItem()'>编辑</li>
		<li (click)='removeItem()'>删除</li>
		<li (click) = 'hideMenu()'>关闭</li>
	</ul>
</div>

<nz-modal 
	[(nzVisible)]="refuseModel" 
	[nzTitle]="refuseTitle" 
	[nzContent]="refuseContent" 
	[nzFooter]="refuseFotter" 
	(nzOnCancel)="refuseModel = false"
>
<ng-template #refuseTitle>
		确认删除节点
	</ng-template>

	<ng-template #refuseContent>
		<div class="c-flexStart">
			<i class="anticon anticon-info-circle-o c-warnInfo"></i>
			<div>
				<h4>
					确认删除
				</h4>
				<p>
					一旦删除,数据不可恢复
				</p>
			</div>
		</div>
	</ng-template>

	<ng-template #refuseFotter>
		<button nz-button nzType="default" (click)="refuseModel = false">取消</button>
		<button nz-button nzType="primary" (click)="deleteNode()">删除</button>
	</ng-template>
</nz-modal>

<nz-modal [(nzVisible)]="infoBoxShow" [nzTitle]="modalTitle" [nzContent]="modalContent" [nzFooter]="modalFooter" (nzOnCancel)="infoBoxShow = false">
	<ng-template #modalTitle>
		<span *ngIf='!editMark'>新增网点</span>
		<span *ngIf='editMark'>编辑网点</span>
	</ng-template>

	<ng-template #modalContent>
		<form nz-form [nzLayout]="'inline'" [formGroup]="validateForm" (ngSubmit)="submitForm()">
			<nz-form-item class='formSec'>
				<nz-form-label [nzSm]="5" nzRequired nzFor="parentName">父级网点</nz-form-label>
				<nz-form-control [nzSm]="18"  [nzOffset]='1'>
					<input nz-input formControlName="parentName" id="parentName" readonly='true'>
				</nz-form-control>
			</nz-form-item>

			<nz-form-item class='formSec'>
				<nz-form-label [nzSm]="5" nzRequired nzFor="name">网点名称</nz-form-label>
				<nz-form-control [nzSm]="18"  [nzOffset]='1'>
					<!-- <nz-input-group nzAddOnAfter="%"> -->
						<input nz-input formControlName="name" id="name">
					<!-- </nz-input-group> -->
					<nz-form-explain *ngIf="validateForm.get('name').dirty && validateForm.get('name').errors">网点名称不能为空</nz-form-explain>
				</nz-form-control>
			</nz-form-item>
		</form>
	</ng-template>

	<ng-template #modalFooter>
		<button nz-button nzType="primary" *ngIf='!editMark' [disabled]="!validateForm.valid" (click)='makeNew()'>确定</button>
		<button nz-button nzType="primary" *ngIf='editMark' [disabled]="!validateForm.valid" (click)='save()'>保存</button>
		<button nz-button nzType="default" (click)='infoBoxShow = false'>关闭</button>
	</ng-template>
</nz-modal>

<nz-modal 
	[(nzVisible)]="delRole" 
	[nzTitle]="refuseTitle2" 
	[nzContent]="refuseContent2" 
	[nzFooter]="refuseFotter2" 
	(nzOnCancel)="delRole = false"
>
<ng-template #refuseTitle2>
		确认删除该角色
	</ng-template>

	<ng-template #refuseContent2>
		<div class="c-flexStart">
			<i class="anticon anticon-info-circle-o c-warnInfo"></i>
			<div>
				<h4>
					确认删除
				</h4>
				<p>
					一旦删除,数据不可恢复
				</p>
			</div>
		</div>
	</ng-template>

	<ng-template #refuseFotter2>
		<button nz-button nzType="default" (click)="delRole = false">取消</button>
		<button nz-button nzType="primary" (click)="delRoleFn()">删除</button>
	</ng-template>
</nz-modal>

<nz-modal 
	[(nzVisible)]="editRole" 
	[nzTitle]="refuseTitle3" 
	[nzContent]="refuseContent3" 
	[nzFooter]="refuseFotter3" 
	(nzOnCancel)="editRole = false"
>
<ng-template #refuseTitle3>
		编辑该角色
	</ng-template>

	<ng-template #refuseContent3>
		<nz-form-item class='formSec'>
			<nz-form-label [nzSm]="5" nzRequired nzFor="roleName">角色名</nz-form-label>
			<nz-form-control [nzSm]="18"  [nzOffset]='1'>
					<input nz-input id="roleName" [(ngModel)] = 'roleModel.nameZh'>
			</nz-form-control>
		</nz-form-item>


		<nz-tree
			[(ngModel)]="menuTree"
			[nzCheckable]="true"
			[nzDefaultExpandAll]="true"
			(nzCheckBoxChange) = 'choseMenu($event)'
			[nzDefaultCheckedKeys] = 'expandKey'
		>
		</nz-tree>
	</ng-template>

	<ng-template #refuseFotter3>
		<button nz-button nzType="default" (click)="editRole = false">取消</button>
		<button nz-button nzType="primary" (click)="editRoleFn()">保存</button>
	</ng-template>
</nz-modal>